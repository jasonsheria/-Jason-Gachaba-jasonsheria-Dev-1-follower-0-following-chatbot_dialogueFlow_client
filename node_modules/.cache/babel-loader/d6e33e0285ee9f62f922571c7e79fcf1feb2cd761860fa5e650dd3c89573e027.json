{"ast":null,"code":"// Filename - component/home.js\nimport React,{useEffect,useState}from\"react\";import'./styles.css';import axios from'axios';import{redirect,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){const[hide,SetHide]=useState(true);const navigate=useNavigate();const[email,setEmail]=useState(null);const[password,setPassword]=useState('');const[name,setName]=useState(null);const[email2,setEmail2]=useState(null);const[password2,setPassword2]=useState(null);const[user,setUser]=useState(null);const[isLoggedIn,setisLoggedIn]=useState(false);function handlerCount(){SetHide(!hide);}const handleSubmit=async e=>{e.preventDefault();const user={name,email:email2,password:password2};const response=await axios.post(\"http://localhost:5000/api/register\",user);// set the state of the user\nsetUser(response.data);// store the user in localStorage\nlocalStorage.setItem('user',response.data.user);if(response.data.user){setEmail2('');setPassword2('');handlerCount();}else{}};const handleSubmit2=async e=>{e.preventDefault();const user={email:email,password:password};const response=await axios.post(\"http://localhost:5000/api/login\",user);// set the state of the user\nsetUser(response.data);// store the user in localStorage\nlocalStorage.setItem('user',response.data.user);console.log(response.data.token);if(response.data.token){setEmail(\"\");setPassword('');localStorage.setItem('Loggin',response.data.token);console.log(localStorage.getItem('user'));navigate('/');}};useEffect(()=>{const loggedInUser=localStorage.getItem('Loggin');if(loggedInUser){navigate('/');}});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"circle\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"register-form-container\",children:[/*#__PURE__*/_jsxs(\"form\",{action:\"\",style:{display:hide?'inline':'none'},className:\"form\",onSubmit:handleSubmit2,children:[/*#__PURE__*/_jsx(\"h1\",{class:\"form-title\",children:\"AUTHENTIFICATION\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-fields\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"form-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Email\",required:true})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Password\",required:true,minlength:\"8\",maxlength:\"128\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"button\",children:\"CONNECTION\"}),/*#__PURE__*/_jsx(\"div\",{class:\"divider\",children:\"ou\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",class:\"button button-google\",onClick:()=>{handlerCount();},children:\"creer compte\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",style:{display:hide?'none':'inline'},className:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{class:\"form-title\",children:\"ENREGISTREZ-VOUS\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-fields\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"form-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),placeholder:\"Name & Lastname\",title:\"Name can only contain letters.\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email2,onChange:e=>setEmail2(e.target.value),placeholder:\"Email\",required:true})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-field\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password2,onChange:e=>setPassword2(e.target.value),placeholder:\"Password\",required:true,minlength:\"8\",maxlength:\"128\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"button\",children:\"ENREGISTRER\"}),/*#__PURE__*/_jsx(\"div\",{class:\"divider\",children:\"ou\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",class:\"button button-google\",onClick:()=>{handlerCount();},children:\"connection\"})]})]})]})]})});}export default Login;","map":{"version":3,"names":["React","useEffect","useState","axios","redirect","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","hide","SetHide","navigate","email","setEmail","password","setPassword","name","setName","email2","setEmail2","password2","setPassword2","user","setUser","isLoggedIn","setisLoggedIn","handlerCount","handleSubmit","e","preventDefault","response","post","data","localStorage","setItem","handleSubmit2","console","log","token","getItem","loggedInUser","children","class","action","style","display","className","onSubmit","type","value","onChange","target","placeholder","required","minlength","maxlength","href","onClick","title"],"sources":["D:/projets/DockerXExpressXReactjs/client/src/component/Login.js"],"sourcesContent":["// Filename - component/home.js\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport './styles.css';\r\nimport axios from 'axios';\r\nimport { redirect,useNavigate } from \"react-router-dom\";\r\nfunction Login() {\r\n\r\n    const [hide, SetHide] = useState(true);\r\n    const navigate = useNavigate();\r\n    const [email, setEmail] = useState(null);\r\n    const [password, setPassword] = useState('');\r\n\r\n    const [name, setName] = useState(null);\r\n    const [email2, setEmail2] = useState(null);\r\n    const [password2, setPassword2] = useState(null);\r\n    const [user, setUser] = useState(null)\r\n    const [isLoggedIn, setisLoggedIn]=useState(false);\r\n\r\n    function handlerCount() {\r\n        SetHide(!hide)\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n\r\n        const user = { name, email:email2, password:password2 };\r\n        const response = await axios.post(\r\n            \"http://localhost:5000/api/register\",\r\n            user\r\n        );\r\n        // set the state of the user\r\n        setUser(response.data)\r\n        // store the user in localStorage\r\n        localStorage.setItem('user', response.data.user)\r\n        if(response.data.user){\r\n            setEmail2('');\r\n            setPassword2('');\r\n            handlerCount();\r\n        }else{\r\n\r\n        }\r\n\r\n    }\r\n    const handleSubmit2 = async e => {\r\n\r\n        e.preventDefault();\r\n\r\n        const user = {  email:email, password:password};\r\n        const response = await axios.post(\r\n            \"http://localhost:5000/api/login\",\r\n            user\r\n        );\r\n        // set the state of the user\r\n        setUser(response.data)\r\n        // store the user in localStorage\r\n\r\n        localStorage.setItem('user', response.data.user)\r\n        console.log( response.data.token)\r\n       \r\n        if(response.data.token){\r\n            setEmail(\"\");\r\n            setPassword('');\r\n            localStorage.setItem('Loggin', response.data.token)\r\n            console.log(localStorage.getItem('user'))\r\n             navigate('/')\r\n        }\r\n\r\n    };\r\n    useEffect(()=>{\r\n        const loggedInUser=localStorage.getItem('Loggin');\r\n        if( loggedInUser){\r\n            navigate('/')\r\n        }\r\n    })\r\n    \r\n    return <>\r\n        <main>\r\n            <div class=\"circle\"></div>\r\n            <div class=\"register-form-container\">\r\n                <form action=\"\" style={{ display: hide ? 'inline' : 'none' }} className=\"form\" onSubmit={handleSubmit2}>\r\n                    <h1 class=\"form-title\">\r\n                        AUTHENTIFICATION\r\n                    </h1>\r\n                    <div class=\"form-fields\">\r\n                        {/* <div class=\"form-field\">\r\n            <input type=\"text\" placeholder=\"Name\" required pattern=\"[a-zA-Z]+\" title=\"Name can only contain letters.\"/>\r\n          </div> */}\r\n                        <div class=\"form-field\">\r\n                            <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" required />\r\n                        </div>\r\n                        <div class=\"form-field\">\r\n                            <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" required minlength=\"8\" maxlength=\"128\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-buttons\">\r\n                        <button class=\"button\"\r\n\r\n                        >CONNECTION</button>\r\n                        <div class=\"divider\">ou</div>\r\n                        <a href=\"#\" class=\"button button-google\"\r\n                            onClick={() => { handlerCount() }}\r\n                        >creer compte</a>\r\n                    </div>\r\n                </form>\r\n\r\n                {/* register form*/}\r\n\r\n                <form action=\"\" style={{ display: hide ? 'none' : 'inline' }} className=\"form\" onSubmit={handleSubmit}>\r\n                    <h1 class=\"form-title\">\r\n                        ENREGISTREZ-VOUS\r\n                    </h1>\r\n                    <div class=\"form-fields\">\r\n                        <div class=\"form-field\">\r\n                            <input type=\"text\" value={name} onChange={(e) => setName(e.target.value)} placeholder=\"Name & Lastname\"  title=\"Name can only contain letters.\" />\r\n                        </div>\r\n\r\n                        <div class=\"form-field\">\r\n                            <input type=\"email\" value={email2} onChange={(e) => setEmail2(e.target.value)} placeholder=\"Email\" required />\r\n                        </div>\r\n                        <div class=\"form-field\">\r\n                            <input type=\"password\" value={password2} onChange={(e) => setPassword2(e.target.value)} placeholder=\"Password\" required minlength=\"8\" maxlength=\"128\" />\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"form-buttons\">\r\n                        <button class=\"button\"\r\n\r\n                        >ENREGISTRER</button>\r\n                        <div class=\"divider\">ou</div>\r\n                        <a href=\"#\" class=\"button button-google\"\r\n                            onClick={() => { handlerCount() }}\r\n                        >connection</a>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </main>\r\n\r\n    </>;\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"AAAA;AAEA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,cAAc,CACrB,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAACC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBACxD,QAAS,CAAAC,KAAKA,CAAA,CAAG,CAEb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAAa,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACW,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACgB,QAAQ,CAAEC,WAAW,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAE5C,KAAM,CAACkB,IAAI,CAAEC,OAAO,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACoB,MAAM,CAAEC,SAAS,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACsB,SAAS,CAAEC,YAAY,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACwB,IAAI,CAAEC,OAAO,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAC0B,UAAU,CAAEC,aAAa,CAAC,CAAC3B,QAAQ,CAAC,KAAK,CAAC,CAEjD,QAAS,CAAA4B,YAAYA,CAAA,CAAG,CACpBhB,OAAO,CAAC,CAACD,IAAI,CAAC,CAClB,CAEA,KAAM,CAAAkB,YAAY,CAAG,KAAM,CAAAC,CAAC,EAAI,CAC5BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,KAAM,CAAAP,IAAI,CAAG,CAAEN,IAAI,CAAEJ,KAAK,CAACM,MAAM,CAAEJ,QAAQ,CAACM,SAAU,CAAC,CACvD,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAA/B,KAAK,CAACgC,IAAI,CAC7B,oCAAoC,CACpCT,IACJ,CAAC,CACD;AACAC,OAAO,CAACO,QAAQ,CAACE,IAAI,CAAC,CACtB;AACAC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEJ,QAAQ,CAACE,IAAI,CAACV,IAAI,CAAC,CAChD,GAAGQ,QAAQ,CAACE,IAAI,CAACV,IAAI,CAAC,CAClBH,SAAS,CAAC,EAAE,CAAC,CACbE,YAAY,CAAC,EAAE,CAAC,CAChBK,YAAY,CAAC,CAAC,CAClB,CAAC,IAAI,CAEL,CAEJ,CAAC,CACD,KAAM,CAAAS,aAAa,CAAG,KAAM,CAAAP,CAAC,EAAI,CAE7BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,KAAM,CAAAP,IAAI,CAAG,CAAGV,KAAK,CAACA,KAAK,CAAEE,QAAQ,CAACA,QAAQ,CAAC,CAC/C,KAAM,CAAAgB,QAAQ,CAAG,KAAM,CAAA/B,KAAK,CAACgC,IAAI,CAC7B,iCAAiC,CACjCT,IACJ,CAAC,CACD;AACAC,OAAO,CAACO,QAAQ,CAACE,IAAI,CAAC,CACtB;AAEAC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEJ,QAAQ,CAACE,IAAI,CAACV,IAAI,CAAC,CAChDc,OAAO,CAACC,GAAG,CAAEP,QAAQ,CAACE,IAAI,CAACM,KAAK,CAAC,CAEjC,GAAGR,QAAQ,CAACE,IAAI,CAACM,KAAK,CAAC,CACnBzB,QAAQ,CAAC,EAAE,CAAC,CACZE,WAAW,CAAC,EAAE,CAAC,CACfkB,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAEJ,QAAQ,CAACE,IAAI,CAACM,KAAK,CAAC,CACnDF,OAAO,CAACC,GAAG,CAACJ,YAAY,CAACM,OAAO,CAAC,MAAM,CAAC,CAAC,CACxC5B,QAAQ,CAAC,GAAG,CAAC,CAClB,CAEJ,CAAC,CACDd,SAAS,CAAC,IAAI,CACV,KAAM,CAAA2C,YAAY,CAACP,YAAY,CAACM,OAAO,CAAC,QAAQ,CAAC,CACjD,GAAIC,YAAY,CAAC,CACb7B,QAAQ,CAAC,GAAG,CAAC,CACjB,CACJ,CAAC,CAAC,CAEF,mBAAOR,IAAA,CAAAI,SAAA,EAAAkC,QAAA,cACHpC,KAAA,SAAAoC,QAAA,eACItC,IAAA,QAAKuC,KAAK,CAAC,QAAQ,CAAM,CAAC,cAC1BrC,KAAA,QAAKqC,KAAK,CAAC,yBAAyB,CAAAD,QAAA,eAChCpC,KAAA,SAAMsC,MAAM,CAAC,EAAE,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAEpC,IAAI,CAAG,QAAQ,CAAG,MAAO,CAAE,CAACqC,SAAS,CAAC,MAAM,CAACC,QAAQ,CAAEZ,aAAc,CAAAM,QAAA,eACnGtC,IAAA,OAAIuC,KAAK,CAAC,YAAY,CAAAD,QAAA,CAAC,kBAEvB,CAAI,CAAC,cACLpC,KAAA,QAAKqC,KAAK,CAAC,aAAa,CAAAD,QAAA,eAIpBtC,IAAA,QAAKuC,KAAK,CAAC,YAAY,CAAAD,QAAA,cACnBtC,IAAA,UAAO6C,IAAI,CAAC,OAAO,CAACC,KAAK,CAAErC,KAAM,CAACsC,QAAQ,CAAGtB,CAAC,EAAKf,QAAQ,CAACe,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAACG,WAAW,CAAC,OAAO,CAACC,QAAQ,MAAE,CAAC,CAC3G,CAAC,cACNlD,IAAA,QAAKuC,KAAK,CAAC,YAAY,CAAAD,QAAA,cACnBtC,IAAA,UAAO6C,IAAI,CAAC,UAAU,CAACC,KAAK,CAAEnC,QAAS,CAACoC,QAAQ,CAAGtB,CAAC,EAAKb,WAAW,CAACa,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAACG,WAAW,CAAC,UAAU,CAACC,QAAQ,MAACC,SAAS,CAAC,GAAG,CAACC,SAAS,CAAC,KAAK,CAAE,CAAC,CACrJ,CAAC,EACL,CAAC,cACNlD,KAAA,QAAKqC,KAAK,CAAC,cAAc,CAAAD,QAAA,eACrBtC,IAAA,WAAQuC,KAAK,CAAC,QAAQ,CAAAD,QAAA,CAErB,YAAU,CAAQ,CAAC,cACpBtC,IAAA,QAAKuC,KAAK,CAAC,SAAS,CAAAD,QAAA,CAAC,IAAE,CAAK,CAAC,cAC7BtC,IAAA,MAAGqD,IAAI,CAAC,GAAG,CAACd,KAAK,CAAC,sBAAsB,CACpCe,OAAO,CAAEA,CAAA,GAAM,CAAE/B,YAAY,CAAC,CAAC,CAAC,CAAE,CAAAe,QAAA,CACrC,cAAY,CAAG,CAAC,EAChB,CAAC,EACJ,CAAC,cAIPpC,KAAA,SAAMsC,MAAM,CAAC,EAAE,CAACC,KAAK,CAAE,CAAEC,OAAO,CAAEpC,IAAI,CAAG,MAAM,CAAG,QAAS,CAAE,CAACqC,SAAS,CAAC,MAAM,CAACC,QAAQ,CAAEpB,YAAa,CAAAc,QAAA,eAClGtC,IAAA,OAAIuC,KAAK,CAAC,YAAY,CAAAD,QAAA,CAAC,kBAEvB,CAAI,CAAC,cACLpC,KAAA,QAAKqC,KAAK,CAAC,aAAa,CAAAD,QAAA,eACpBtC,IAAA,QAAKuC,KAAK,CAAC,YAAY,CAAAD,QAAA,cACnBtC,IAAA,UAAO6C,IAAI,CAAC,MAAM,CAACC,KAAK,CAAEjC,IAAK,CAACkC,QAAQ,CAAGtB,CAAC,EAAKX,OAAO,CAACW,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAACG,WAAW,CAAC,iBAAiB,CAAEM,KAAK,CAAC,gCAAgC,CAAE,CAAC,CACjJ,CAAC,cAENvD,IAAA,QAAKuC,KAAK,CAAC,YAAY,CAAAD,QAAA,cACnBtC,IAAA,UAAO6C,IAAI,CAAC,OAAO,CAACC,KAAK,CAAE/B,MAAO,CAACgC,QAAQ,CAAGtB,CAAC,EAAKT,SAAS,CAACS,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAACG,WAAW,CAAC,OAAO,CAACC,QAAQ,MAAE,CAAC,CAC7G,CAAC,cACNlD,IAAA,QAAKuC,KAAK,CAAC,YAAY,CAAAD,QAAA,cACnBtC,IAAA,UAAO6C,IAAI,CAAC,UAAU,CAACC,KAAK,CAAE7B,SAAU,CAAC8B,QAAQ,CAAGtB,CAAC,EAAKP,YAAY,CAACO,CAAC,CAACuB,MAAM,CAACF,KAAK,CAAE,CAACG,WAAW,CAAC,UAAU,CAACC,QAAQ,MAACC,SAAS,CAAC,GAAG,CAACC,SAAS,CAAC,KAAK,CAAE,CAAC,CACvJ,CAAC,EACL,CAAC,cACNlD,KAAA,QAAKqC,KAAK,CAAC,cAAc,CAAAD,QAAA,eACrBtC,IAAA,WAAQuC,KAAK,CAAC,QAAQ,CAAAD,QAAA,CAErB,aAAW,CAAQ,CAAC,cACrBtC,IAAA,QAAKuC,KAAK,CAAC,SAAS,CAAAD,QAAA,CAAC,IAAE,CAAK,CAAC,cAC7BtC,IAAA,MAAGqD,IAAI,CAAC,GAAG,CAACd,KAAK,CAAC,sBAAsB,CACpCe,OAAO,CAAEA,CAAA,GAAM,CAAE/B,YAAY,CAAC,CAAC,CAAC,CAAE,CAAAe,QAAA,CACrC,YAAU,CAAG,CAAC,EACd,CAAC,EACJ,CAAC,EACN,CAAC,EACJ,CAAC,CAET,CAAC,CACP,CAEA,cAAe,CAAAjC,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}